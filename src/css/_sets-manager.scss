@import 'colors';
@import 'zoom';

@mixin input-minimal-sm {
    border-radius: 3px;
    padding: 1px 4px;
    border: 0;
}

@mixin sets-manager($theme-name, $theme-colors) {

    /* The zoom mixin contains styles for the popover transition animations. */
    @include zoom;

    $node-height: 32 !default;

    .sets-manager {
        .rc-tree {
            padding-left: 0;
            margin: 0;
            border: 1px solid transparent;

            .node-menu-icon {
                fill: map-get($global-colors, "gray-mid");
                cursor: pointer;
                height: 14px;
                position: relative;
                vertical-align: top;
                width: #{$node-height}px;
                top: 5.5px;

                &:hover {
                    fill: lighten(map-get($global-colors, "gray-mid"), 10%);
                }
            }

            .level-buttons-container {
                height: #{$node-height}px;
                width: 100%;
                position: relative;
                padding-left: 24px;

                .level-buttons {
                    position: relative;
                    top: 0;
                    display: inline-block;
                    width: #{$node-height / 2 + 18}px;

                    .level-line-zero {
                        height: #{$node-height / 2}px;
                        width: 3px;
                        background-color: #555;
                        position: absolute;
                        top: 0;
                        left: 0;
                    }

                    .level-line {
                        height: 3px;
                        width: #{$node-height / 2}px;
                        background-color: #555;
                        position: relative;
                        top: #{$node-height / 2}px;
                        left: 0;
                    }

                    input.level-radio-button {
                        cursor: pointer;
                        -webkit-appearance: none;
                        -moz-appearance: none;
                        appearance: none;
                        /* create custom radiobutton appearance */
                        display: inline-block;
                        width: 16px;
                        height: 16px;
                        padding: 7px !important; /* TODO: Only need "important" to override Bootstrap. */
                        /* background-color only for content */
                        background-clip: content-box;
                        border: 2px solid lighten(map-get($theme-colors, "primary-foreground"), 5%);
                        background-color: lighten(map-get($theme-colors, "primary-foreground"), 5%);
                        border-radius: 50%;
                        position: relative;
                        top: 5px;
                        left: #{$node-height / 2}px;

                        &:checked {
                            background-clip: unset;
                        }
                    }
                }
            }

            // Styles from rc-tree
            &-focused:not(&-active-focused) {
                border-color: cyan;
            }
            
            .rc-tree-treenode {
                margin: 0;
                padding: 0;
                line-height: #{$node-height - 8}px;
                white-space: nowrap;
                list-style: none;
                outline: 0;

                .title-button, .title-input {
                    height: #{$node-height - 8}px;
                    line-height: #{$node-height - 8}px;
                    padding: 0;
                    margin: 0;
                    border: 0;
                    color: lighten(map-get($theme-colors, "primary-foreground"), 5%);
                    background: transparent;
                    background-color: transparent;
                    vertical-align: top;
                    font-size: 14px;
                }

                .title-input {
                  width: calc(100% - 60px);
                  margin-right: 10px;
                  background-color: map-get($global-colors, "gray-mid");
                  border-radius: 4px;
                  outline: none;
                  padding: 4px 0px 4px 4px;
                  border: 1px solid map-get($global-colors, "gray-mid");

                  &:focus {
                    box-shadow: 0 0 5px map-get($theme-colors, "primary-foreground-active");
                    border: 1px solid map-get($theme-colors, "primary-foreground-active");
                  }
                }

                .title-save-button {
                  background-color: map-get($global-colors, "gray-dark");
                  border: 1px solid map-get($global-colors, "gray-dark");
                  color: map-get($global-colors, "gray-light");
                  border-radius: 3px;
                  width: 50px;
                  height: 24px;
                  line-height: 20px;
                  font-size: 13px;
                  vertical-align: top;
                  margin: 0;
                  padding: 0;

                  &:hover {
                    background-color: lighten(map-get($global-colors, "gray-dark"), 5%);
                    border: 1px solid lighten(map-get($global-colors, "gray-dark"), 5%);
                  }
                }

                
                .draggable {
                  color: #333;
                  -moz-user-select: none;
                  -khtml-user-select: none;
                  -webkit-user-select: none;
                  user-select: none;
                  /* Required to make elements draggable in old WebKit */
                  -khtml-user-drag: element;
                  -webkit-user-drag: element;
                }
                &.drag-over {
                  > .draggable {
                    color: white;
                    background-color: #316ac5;
                    border: 1px #316ac5 solid;
                    opacity: 0.8;
                  }
                }
                &.drag-over-gap-top {
                  > .draggable {
                    border-top: 2px blue solid;
                  }
                }
                &.drag-over-gap-bottom {
                  > .draggable {
                    border-bottom: 2px blue solid;
                  }
                }
                &.filter-node {
                  > .rc-tree-node-content-wrapper {
                    color: #a60000 !important;
                    font-weight: bold !important;
                  }
                }
                ul {
                  margin: 0;
                  padding-left: 35px;
                }
                .rc-tree-node-content-wrapper {
                  width: calc(100% - 10px);
                  display: inline-block;
                  margin: 0;
                  padding: 0;
                  text-decoration: none;
                  vertical-align: top;
                  cursor: pointer;
                  position: relative;
                  & > span {
                    position: relative;
                    width: 100%;
                    display: inline-block;

                    .title-button {
                      position: relative;
                      max-width: calc(100% + 60px);
                      overflow: hidden;
                      text-overflow: ellipsis;
                    }

                    .node-menu-icon {
                      position: relative;
                      left: 0;
                    }
                  }
                }
                span {
                  &.rc-tree-switcher,
                  &.rc-tree-checkbox {
                    display: inline-block;
                    margin-right: 6px;
                    vertical-align: middle;
                    background-color: transparent;
                    
                    background-repeat: no-repeat;
                    background-attachment: scroll;
                    border: 0 none;
                    outline: none;
                    cursor: pointer;
                  }

                  &.rc-tree-switcher {
                      svg {
                        width: 15px;
                        height: 15px;
                      }
                    &.rc-tree-switcher-noop {
                      cursor: auto;
                    }

                    &.rc-tree-switcher_close {
                        -webkit-transform: rotate(-90deg);
                        -ms-transform: rotate(-90deg);
                            transform: rotate(-90deg);
                    }
                  }
                  &.rc-tree-checkbox {
                    width: 13px;
                    height: 13px;
                    margin: 0 3px;
                    border: 2px solid gray;
                    border-radius: 3px;
                    position: relative;
                    left: 0;
                    &-checked {
                      background-color: gray;
                    }
                    &-indeterminate {
                      background-position: -14px -28px;
                    }
                    &-disabled {
                      background-position: 0 -56px;
                    }
                    &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {
                      background-position: -14px -56px;
                    }
                    &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {
                      position: relative;
                      background: #ccc;
                      border-radius: 3px;
                      &::after {
                        position: absolute;
                        top: 5px;
                        left: 3px;
                        width: 5px;
                        height: 0;
                        border: 2px solid #fff;
                        border-top: 0;
                        border-left: 0;
                        -webkit-transform: scale(1);
                        transform: scale(1);
                        content: ' ';
                      }
                    }
                  }
                }
              }
              &:not(.rc-tree-show-line) {
                .rc-tree-treenode {
                  .rc-tree-switcher-noop {
                    background: none;
                  }
                }
              }
              &.rc-tree-show-line {
                .rc-tree-treenode:not(:last-child) {
                  > ul {
                    background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7')
                      0 0 repeat-y;
                  }
                  > .rc-tree-switcher-noop {
                    background-position: -56px -18px;
                  }
                }
                .rc-tree-treenode:last-child {
                  > .rc-tree-switcher-noop {
                    background-position: -56px -36px;
                  }
                }
              }
              &-child-tree {
                display: none;
                &-open {
                  display: block;
                }
              }
              &-treenode-disabled {
                > span:not(.rc-tree-switcher),
                > a,
                > a span {
                  color: #767676;
                  cursor: not-allowed;
                }
              }
              &-treenode-active {
                background: rgba(0, 0, 0, 0.1);
            
                // .rc-tree-node-content-wrapper {
                //   background: rgba(0, 0, 0, 0.1);
                // }
              }
              &-node-selected {
                background-color: #ffe6b0;
                border: 1px #ffb951 solid;
                opacity: 0.8;
              }
              &-icon__open {
                margin-right: 2px;
                vertical-align: top;
                background-position: -110px -16px;
              }
              &-icon__close {
                margin-right: 2px;
                vertical-align: top;
                background-position: -110px 0;
              }
              &-icon__docu {
                margin-right: 2px;
                vertical-align: top;
                background-position: -110px -32px;
              }
              &-icon__customize {
                margin-right: 2px;
                vertical-align: top;
              }
              &-indent-unit {
                display: inline-block;
                padding-left: 18px;
              }
        }

    }

    .vitessce-tooltip {
      .ant-tooltip-content .ant-tooltip-inner {
        font-size: 12px;
        background-color: rgba(0, 0, 0, 0.95);
      }
    }

}